////////////////////////////////////////////////////////////////////////////////
//
//	Includes
//
#include "gui_newdealdlg.h"

// Qt Includes
#include <QMessageBox>
#include <QIntValidator>
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
namespace fm {
////////////////////////////////////////////////////////////////////////////////
namespace gui {
////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////
//
// class CAddCustomerDlg
//

// Constructors
CNewDealDlg::CNewDealDlg( QWidget *pwParent )
	: QDialog( pwParent )
{
	ui.setupUi( this );
	// Setup Customer Selector
	ui.wOtherCustomer->hide();

	// Setup Store Explorer widget
	m_pwStoreExplorer = new CStoreExplorer();
	layout()->addWidget( m_pwStoreExplorer );
	adjustSize();
	// Connections
	FM_CONNECT( ui.cbxCustomer, currentIndexChanged( int ), this, OnCustomerChanged( int ) );
}

void CNewDealDlg::OnCustomerChanged( int nIndex )
{
	int nLastIndex = ui.cbxCustomer->count() - 1;
	if (nIndex == nLastIndex)
		ui.wOtherCustomer->show();
	else
		ui.wOtherCustomer->hide();
	adjustSize();
}

// setLabelColor
void CNewDealDlg::SetLabelColor( QLabel* pLabel, bool bValid )
{
	if (!pLabel)
		return;
	QPalette palette = pLabel->palette();
	palette.setColor( pLabel->foregroundRole(), bValid ? Qt::black : Qt::red );
	pLabel->setPalette( palette );
}

QSize CNewDealDlg::sizeHint() const
{
	return QSize( width(), -1 );
}

////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////
} // namespace gui
////////////////////////////////////////////////////////////////////////////////
} // namespace fm
////////////////////////////////////////////////////////////////////////////////
