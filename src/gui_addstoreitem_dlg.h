#ifndef GUI_ADD_STORE_ITEM_DLG_H
#define GUI_ADD_STORE_ITEM_DLG_H

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// Includes
//
#ifndef FM_CORE_H
#	include "fm_core.h"
#endif

#ifndef GUI_TOTAL_VIEWER_WDG_H
#	include "gui_totalviewer_wdg.h"
#endif

// Ui
#include "ui_addstoreitem.h"

// Qt Includes
#include <QDialog>
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
namespace fm {
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
namespace gui {
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// class CAddStoreItem
//
class CAddStoreItem : public QDialog
{
	Q_OBJECT

public:// Constructors
	CAddStoreItem( QStringList const& lstItemNames, 
				   QWidget* pwParent = nullptr );
	~CAddStoreItem() = default;

public:
	//
	//	Main Interface
	//
	// Clear Dialog
	inline void Clear(QString const& strGroupName = QString());
	inline QString GetGroupName() const;

	inline void SetGroupName(QString const& strGroupName);
	inline void AddGroupNames(QStringList const& strListGroupNames);

	inline t_lstProductPriceInfo GetProductInfo() const;

protected slots:
	void OnGroupSelectionChanged(QString const& strGroupName);
    void OnItemSelectionChanged( int nIndex );
    void OnCountChanged( int nNewCount );
    void OnAddClicked();

protected:// Helper Methodes
	void SetLabelColor( QLabel* pLabel, bool bValid );

protected:
	//
	//	Overidden Methods
	//

private:
	//
	//	Content
	//
	Ui::EditStorageDlgUI ui;
	CTotalViewer*   m_pwTotalViewer;
	// Register
	int m_nOldCount;
};
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	Inline Implementations
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Clear
inline void CAddStoreItem::Clear(QString const& strGroupName)
{
	m_nOldCount = 0;
	m_pwTotalViewer->OnClear();
	ui.cbxItemType->clear();
	ui.sbxCount->setValue( 0 );
	ui.lineEditGroupName->clear();

	SetGroupName(strGroupName);
}

void CAddStoreItem::SetGroupName(QString const& strGroupName)
{
	ui.lineEditGroupName->setText(strGroupName);
}

inline void CAddStoreItem::AddGroupNames(QStringList const& strListGroupNames)
{
	ui.cbxGroups->addItems(strListGroupNames);
}

inline t_lstProductPriceInfo CAddStoreItem::GetProductInfo() const
{
	FM_ASSERT( m_pwTotalViewer );
	return m_pwTotalViewer->GetProductPriceInfo();
}

inline QString CAddStoreItem::GetGroupName() const
{
	return ui.lineEditGroupName->text();
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
} // namespace gui
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
} // namespace fm
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#endif // GUI_ADD_STORE_ITEM_DLG_H