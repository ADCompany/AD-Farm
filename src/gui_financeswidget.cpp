////////////////////////////////////////////////////////////////////////////////
//
//	Includes
//
#include "gui_financeswidget.h"

// Qt Includes

////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
namespace fm {
////////////////////////////////////////////////////////////////////////////////
namespace gui {
////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////
//
// class CFinancesWidget
//

// Constructors
CFinancesWidget::CFinancesWidget(QWidget* pwParent, std::shared_ptr<db::CDBManager> pDBManager)
	: QWidget(pwParent),
	m_pCustomersData(nullptr)
{
	m_uiFinancesWidget.setupUi(this);

	SetDBManager(pDBManager);

	m_uiFinancesWidget.tableView->setContextMenuPolicy(Qt::CustomContextMenu);
}

void CFinancesWidget::SetDBManager(std::shared_ptr<db::CDBManager> pDBManager)
{
	if (pDBManager == nullptr)
		return;

	m_pCustomersData = std::static_pointer_cast<db::CCustomersData>(pDBManager->GetDBComponent(db::CDBManager::component::customers));

	FM_CONNECT(m_pCustomersData.get(), sigChangeData(), this, onChangeData());

	UpdateData();
}

////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////
} // namespace gui
////////////////////////////////////////////////////////////////////////////////
} // namespace fm
////////////////////////////////////////////////////////////////////////////////
